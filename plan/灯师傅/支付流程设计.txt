支付前：

需要登录(适合长期使用的网站) 添加购物车前/后需要登录（后一种更好，防止用户放弃）


不需要登录（适合临时使用的网站）

Dell，onlineshoes等网上商城就为用户提供了非注册用户快速结账和注册新用户登录两种方式。

但是要确保信息完整

在有清晰的流程的前提下让用户尽可能少的填写信息，多提供选项进行勾选，从而加快用户整个的支付效率。

给用户明确的流程条

支付手段越多越好，毕竟支付宝只有杭州流行.

支付完成后最好邮件，短信提醒


百亿级微信红包的高并发资金交易系统设计方案

订单操作
a. 锁库存
b. 插入“秒杀”记录
c. 更新库存

解决高并发问题
方案一，使用内存操作替代实时的DB事务操作。因为要锁表，所以先存内存再更新db
方案二，使用乐观锁替代悲观锁。(悲观锁，是关系数据库管理系统里的一种并发控制的方法。它可以阻止一个事务以影响其他用户的方式来修改数据。

乐观锁，它假设多用户并发的事务在处理时不会彼此互相影响，各事务能够在不产生锁的情况下处理各自影响的那部分数据。在更新库存的事务提交时，检查该版本号是否已被其他事务修改。如果版本没被修改，则提交事务，且版本号加1；如果版本号已经被其他事务修改，则回滚事务，并给上层报错。虽然不用等，但是容易报错！  悲观锁就是先判断再更新，乐观就是先更新再判断)

微信：
1.系统垂直SET化，分而治之。 相当于根据红包id分表了
2..逻辑Server层将请求排队  就是把请求排队再处理
3..双维度库表设计  根据id的hash和日期分表 分库表规则像db_xx.t_y_dd设计，其中，xx/y是红包ID的hash值后三位，dd的取值范围在01~31，代表一个月天数最多31天。


支付宝

http://www.jb51.net/article/84424.htm
1、终端消费者在商家网站选择商品，下订单。
2、商家把支付信息，get到支付宝指定的链接。
3、终端消费者在支付宝的网站上操作付款。
4、付款成功后，支付宝post付款成功的信息到商家预先提供的地址。
5、支付宝在终端消费者付款成功后三秒后，通过get跳回商家指定的链接。
第4步跟终端消费者操作付款的跳转无关，所以被称为异步通知。这一步，支付宝期待你返回'success'，如果你不返回'success'，支付宝会于4分钟后再次post付款成功的信息，此后每10分钟post一次，至少30分钟内如此。如果终端消费者付款失败，异步通知不会发生。

1、生成商品订单。终端消费者选择商品生成商品订单。ID号要唯一，这个唯一不是要你采用UUID，而是跟支付宝往来过程唯一即可，从1递增也可以，只是终端消费者能看到这个id，所以最好采用固定长度的字符串，终端消费者如果知道自己是第一个客户，会不会心里发怵？后面会谈到，为了安全不仅不能用递增，而且至少要6位随机码以上。
2、选择支付方式。因为我们仅仅集成了即时到帐，所以只有支付宝付款一个选项。把支付方式加入订单信息，同时把订单id post到下一步地址，这一步post，最好采用新开页面，本页面弹出对话框，让客户自己选择支付成功或者支付失败。
3、发送支付信息。根据post过来的订单号组合信息，get方式发送数据给支付宝，同时带动终端消费者页面跳转到支付宝支付页面。
4、接受异步通知。
5、支付成功后支付宝跳转回来的程序。因为回来时get方式，为避免终端消费者看到更多敏感信息，这一步并没有渲染页面，而是处理信息，跳转到另外一个页面。
6、显示支付结果。这个页面和第2步让客户点击支付成功跳转的是同一个。支付失败，就跳转到一个说明吧。


用支付成功来进行跳转